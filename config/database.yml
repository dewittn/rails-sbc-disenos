# MySQL 8 configuration
# Uses environment variables for credentials
# Default values are provided for development environment
default: &default
  adapter: mysql2
  encoding: utf8mb4
  charset: utf8mb4
  collation: utf8mb4_unicode_ci
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  timeout: 5000
  host: <%= ENV.fetch("DB_HOST") { "db" } %>
  username: <%= ENV.fetch("DB_USERNAME") { "root" } %>
  password: <%= ENV.fetch("DB_PASSWORD") { "password" } %>
  # MySQL 8 authentication plugin compatibility
  default_authentication_plugin: mysql_native_password

development:
  <<: *default
  database: <%= ENV.fetch("DB_NAME") { "hilos_development" } %>

# Warning: The database defined as 'test' will be erased and
# re-generated from your development database when you run 'rake'.
# Do not set this db to the same as development or production.
test:
  <<: *default
  database: <%= ENV.fetch("DB_NAME") { "hilos_test" } %>

production:
  <<: *default
  database: <%= ENV.fetch("DB_NAME") { "hilos_production" } %>
  # Production should always use environment variables
  # Do not use default values in production