var colores = new Array();
<% for color in @colores -%>
  colores.push(new Array(<%= color.marca_id %>, '<%=h color.nombre %>', <%= color.id %>));
<% end -%>

function marcaSelected(domid) {
  marca_id = $('marca_'+ domid).getValue();
  options = $('marca_' + domid).up('#hilo').down('#diseno_hilo_attributes__color_id').options;
  options.length = 1;
  colores.each(function(color) {
    if (color[0] == marca_id) {
      options[options.length] = new Option(color[1], color[2]);
    }
  });
  if (options.length == 1) {
    $('marca_' + domid).up('#hilo').down('#diseno_hilo_attributes__color_id').hide();
  } else {
    $('marca_' + domid).up('#hilo').down('#diseno_hilo_attributes__color_id').show();
  }
} 