var colores = new Array();
<% for color in @colores -%>
  colores.push(new Array(<%= color.marca_id %>, '<%=h color.nombre %>', <%= color.id %>));
<% end -%>

function marcaSelected(eliment) {
  marca_id = eliment.getValue();
  if (eliment.next().tagName == "SELECT")
    { select = eliment.next(); }
  else
    { select = eliment.next().down(); }
  options = select.options;
  options.length = 1;
  colores.each(function(color) {
    if (color[0] == marca_id) {
      options[options.length] = new Option(color[1], color[2]);
    }
  });
  if (options.length == 1) 
    { select.hide(); }
  else 
    { select.show(); }
} 